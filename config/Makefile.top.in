#
# Top level Makefile Template for xosview.
# 
include Makefile.config

OBJS = \
llist.o \
Host.o \
xwin.o \
Xrm.o \
defaultstring.o \
meter.o \
fieldmeter.o \
fieldmeterdecay.o \
bitmeter.o \
xosview.o \
main.o

CFILES := $(OBJS:.o=.cc)
DEPFILES := $(OBJS:%=.%.d)

INSTALL            = @INSTALL@

#-----------------------------------------------------------------------

all : xosview

defaultstring.cc: Xdefaults defresources.awk
	@AWK@ -f defresources.awk Xdefaults > defaultstring.cc

@host_os@/libmeter.a :
	$(MAKE) -C @top_srcdir@/@host_os@

xosview: @host_os@/libmeter.a $(OBJS) 
	$(CXX) $(LFLAGS) -o xosview $(OBJS) $(LIBS)

install: xosview
	@INSTALL_PROGRAM@ @INSTALL_ARGS@ xosview @prefix@/bin
	@INSTALL_DATA@ Xdefaults /usr/lib/X11/app-defaults/XOsview
	@INSTALL_DATA@ xosview.1 @prefix@/man/man1

install-man:
	install -c xosview.1 /usr/X11/man/man1

distrib: distclean
	cd @top_srcdir@/..;tar cf `basename $(PWD)`.tar `basename $(PWD)`; \
        gzip -9 `basename $(PWD)`.tar

clean :
	$(MAKE) -C @host_os@ clean
	$(MAKE) -C config clean
	rm -f xosview $(OBJS) $(DEPFILES) *~ defaultstring.cc

distclean: clean
	rm -f Makefile Makefile.config @host_os@/Makefile \
           config.cache config.log config.status

maintainer-clean: distclean
	rm -f configure

@AUTODEPEND@
